<div
  class="dsl-input"
  contenteditable="true"
  spellcheck="false"
  (focus)="onFocus()"
  (keydown)="onKeydown($event)"
  (keyup)="onKeypress($event)"
  (click)="onClick()"
  #editableContent
></div>

<div
  class="dropdown"
  *ngIf="inputActive && activeStatement && activeToken && activeToken.conf.valueSource">
  <app-dropdown
    [tokenConf]="activeToken.conf"
    [statement]="activeStatement"
    [keyboardEvents]="keyboardEvents"
    [filter]="activeToken.token"
    (onValue)="updateActiveTokenValue($event)">
  </app-dropdown>
</div>

<div
  class="dropdown"
  *ngIf="inputActive && !activeToken && predictedNextToken && predictedNextToken.conf.valueSource">
  <app-dropdown
    [tokenConf]="predictedNextToken.conf"
    [statement]="activeStatement"
    [keyboardEvents]="keyboardEvents"
    [filter]="predictedNextToken.token"
    (onValue)="appendToken($event)">
  </app-dropdown>
</div>

<pre>
  caret: {{caretPos}}
  total length: {{contentLength}}
</pre>

<pre>
current token:
{{activeToken | json}}

current statement:
{{statements | json}}
</pre>


<pre>
predicated next token:
{{predictedNextToken | json}}
</pre>
